<div class="hero-unit">
<h1><%= @player.name %> - <%= @game.name %> (<%= @player.ratings.find_by_game_id(@game).value %>)</h1>
</div>
<div class="row-fluid">

  <div class="span6">
    <h2>Head-to-Head Records</h2>
    <ol>
      <% @game.all_ratings.each do |rating| %>
        <% opponent = rating.player %>
        <% wins = @player.results.wins.for_game(@game).against(opponent).size %>
        <% losses = @player.results.losses.for_game(@game).against(opponent).size %>
        <li class="<%= "gray" if @player != opponent and wins == 0 and losses == 0 %>" >
          <%= opponent.name %>
          <span class="pull-right" style="width:8em;">
          <% unless opponent == @player %>
            (<%= rating.value %>)
            (<%= wins %> - <%= losses %>)
          <% end %>
          </span>
        </li>
      <% end %>
    </ol>
  </div>

  <div class="span6">
    <h2>Recent Games</h2>
    <% @player.results.for_game(@game).limit(15).order('created_at desc').each do |result| %>
      <li>
        <%= result.created_at.to_s(:short) %>
        -
        <% if @player == result.winner %>
          Beat <%= result.loser.name %>
        <% else %>
          Lost to <%= result.winner.name %>
        <% end %>
        <% if result.most_recent? -%>
          <%= link_to "Delete", game_result_path(@game, result), :class => "btn btn-danger", :method => :delete, :confirm => "Are you sure?" %>
        <% end -%>
      </li>
    <% end %>
  </div>

</div>
